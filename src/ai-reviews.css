@layer components {
  .reviews-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: white;
    font: inherit;
    cursor: pointer;
    border: none;
  }
  
  .review-image {
    display: block;
    max-width: 100%;
    height: 100%;
  }

  .review-icon {
    display: inline-flex;
    width: 20px;
    height: 20px;
  }
  
  .review-icon-small {
    display: inline-flex;
    width: 15px;
    height: 15px;
  }
}

 
@layer ai-reviews {
  .reviews-actions button {
    font-size: 1.5rem;
    gap: 0.75rem;
    padding: .5rem 1.5rem;
    border-radius: 4px;
  }

  .reviews-save-button {
    background-color: rgb(26, 127, 100);
    transition: box-shadow 0.2s, background-color 0.2s;

    &:disabled {
      background-color: rgba(26, 127, 100, 0.5);
      pointer-events:none;
    }

    &:not(:disabled):hover {
      box-shadow: inset 0 0 0 150px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(26, 127, 100, 1.0);
    }
  }

  .reviews-generate-button {
    background-color: rgb(0, 0, 0);
    transition: box-shadow 0.2s, background-color 0.2s;

    &:disabled {
      background-color: rgba(0,0,0, 0.6);
      pointer-events:none;
    }

    &:not(:disabled):hover {
      box-shadow: inset 0 0 0 150px rgba(255, 255, 255, 0.1), 0 0 0 1px rgba(0, 0, 0, 1.0);
    }
  }

  .paginator-button {
    padding: 0.75rem;
    border-radius: 50%;
    transition: transform 0.2s ease;

    &:not(:disabled):hover {
      transform: scale(1.15);
    }
  }
  

  #reviews-collapsible {
    display: grid;
    grid-template-rows: 0fr;
    transition: grid-template-rows 300ms;
  
    &[data-open="true"] {
      grid-template-rows: 1fr;
    }
  
    > .collapsible-content {
      overflow: hidden;
    }
  
    > .error-container {
      background-color: #f8d7da;
      color: #58151c;
    }
  
    > .success-container {
      background-color: #d1e7dd;
      color: #0a3622;
    }
  }
  

  .reviews-placeholder {
    height: 100px;
  }

  .reviews {
    --shadow-color: 0deg 0% 63%;
    --shadow-elevation-medium:
      0.3px 0.5px 0.7px hsl(var(--shadow-color) / 0.36),
      0.8px 1.6px 2px -0.8px hsl(var(--shadow-color) / 0.36),
      2.1px 4.1px 5.2px -1.7px hsl(var(--shadow-color) / 0.36),
      5px 10px 12.6px -2.5px hsl(var(--shadow-color) / 0.36);
  }

  .reviews-auto, .reviews-manual {
    overflow: hidden;
  }

  .reviews-snap {
    overflow-x: auto;
    scroll-snap-type: x mandatory;

    > .review-slide {
      scroll-snap-align: start;
    }

    @media (width >= 750px) {
      &::-webkit-scrollbar {
        height: 5px;
      }
  
      &::-webkit-scrollbar-track {
        background: transparent;
      }
      
      &::-webkit-scrollbar-thumb {
        background: #c0c0c0;
        border-radius: 10px;
      }
    }
  }

  .review-slide {
    transition: box-shadow 0.2s ease;
    cursor: pointer;
    /* box-shadow: var(--shadow-elevation-medium); */
    box-shadow: 3px 4px 8px rgba(0, 0, 0, .2);

    &:hover {
      /* transform: scale(1.025); */
      box-shadow: 3px 4px 15px rgba(0, 0, 0, .4);

      > .review-image img {
        filter: brightness(70%);
      }
    }
  }

  .review-avatar {
    border-radius: 50%;
  }

  .review-author {
    font-size: 1.5rem;

    @media screen and (width >= 750px) {
      font-size: 1.6rem;
    }
  }

  .review-date {
    font-size: 1.4rem;
  }

  .review-body {
    font-size: 1.4rem;
  }

  .review-image {
    > :is(img,svg) {
      display: block;
      max-width: 100%;
      height: 100%;
    }

    > img {
      transition: filter 0.2s;
    }
  }
    
  .reviews-layout-1, .reviews-layout-2 {
    --gap: 1rem;
    --review-columns: 1;
    --review-rows: 0;
    gap: var(--gap);
    padding: 1rem 1rem;
    scroll-padding: 1rem;
    
    > .review-slide {
      width: calc((100% - (var(--review-columns) - 1) * var(--gap)) / var(--review-columns));
      

      > .review-image {
        height: 230px;
      }
    }

    @media screen and (width >= 750px) {
      --review-columns: 2;

      & .review-image {
        height: 240px;
      }
    }

    @media screen and (width >= 990px) {
      --review-columns: 3;

      & .review-image {
        height: 250px;
      }
    }
  }
  
  .reviews-layout-3 {
    --gap: 1rem;
    --review-columns: 1;
    --review-rows: 1;
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: calc((100% - (var(--review-columns) - 1) * var(--gap)) / var(--review-columns));
    grid-template-rows: 20rem 20rem;
    gap: var(--gap);
    padding: 1rem 1rem;
    scroll-padding: 1rem;
  
    > .review-slide {
      display: grid;
      grid-template-rows: repeat(3, min-content) 1fr;
      grid-template-columns: 40% 1fr;
      column-gap: 1rem;

      > *:not(.review-image) {
        padding-right: 0.5rem;
      }
  
      > .review-image {
        grid-row: span 4;
      }

      > .review-body {
        display: -webkit-box;
        -webkit-line-clamp: 5;
        -webkit-box-orient: vertical;
      }
    }
    
    @media (width >= 750px) {
      --review-columns: 2;
    }
  }

  .reviews-layout-4 {
    --review-columns: 2;
    column-count: var(--review-columns);
    -webkit-column-count: var(--review-columns);
    column-gap: 2rem;
  
    > .review-slide {
      margin-bottom: 1.5rem;

      > .review-image {
        height: 230px;
      }
    }
    
    @media (width >= 750px) {
      --review-columns: 3;
    }
  }
  

  #reviews-dialog {
    width: 90%;
    
    &::backdrop {
      background-color: rgba(0,0,0,0.5);
    }

    & .dialog-wrapper {
      display: flex;
      flex-direction: column;

      > .dialog-image {
        height: 250px;
        width: 100%;
      }
    }

    @media (width >= 750px) {
      max-width: 770px;

      & .dialog-wrapper {
        flex-direction: row;

        > .dialog-image {
          width: 40%;
        }
      }
    }
  }
  

  body:has(dialog[open]) {
    overflow: hidden;
  }
}


@layer utilities {
  .flex {
    display: flex;
  }

  .flex-col {
    display: flex;
    flex-direction: column;
  }

  .row-center {
    display: flex;
    align-items: center;
  }

  .flex-center {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .flex-none {
    flex: none;
  }

  .flex-1 {
    flex: 1;
  }

  .align-center {
    align-items: center;
  }

  .justify-center {
    justify-content: center;
  }

  .justify-between {
    justify-content: space-between;
  }

  .self-end {
    align-self: end;
  }

  .align-end {
    align-items: end;
  }

  .w-full {
    width: 100%;
  }

  .overflow-hidden {
    overflow: hidden;
  }

  .leading-sm {
    line-height: 1.375;
  }

  .leading-md {
    line-height: 1.5;
  }

  .rounded-lg {
    border-radius: 0.5rem;
  }

  .gap-2 {
    gap: 0.5rem;
  }

  .gap-3 {
    gap: 0.75rem;
  }

  .gap-4 {
    gap: 1rem;
  }

  .p-4 {
    padding: 1rem;
  }

  .m-0 {
    margin: 0;
  }  
}